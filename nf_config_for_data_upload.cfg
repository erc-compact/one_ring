apptainer.enabled = true
apptainer.envWhitelist = 'APPTAINER_BINDPATH, APPTAINER_LD_LIBRARY_PATH'
apptainer.runOptions = '-B /b -B /bscratch --nv'
env.APPTAINER_IMAGE_PATH = '/b/u/vishnu/SINGULARITY_IMAGES'
live.enabled = true
live.file = 'results/PROGRESS'
live.interval = 5
live.overwrite = true
module = ['java/17.0.4', 'apptainer']
params.apptainer_images.kafka = '/b/u/vishnu/SINGULARITY_IMAGES/kafka_producer_latest.sif'
params.apptainer_images.peasoup = '/b/u/vishnu/SINGULARITY_IMAGES/peasoup_sm89.sif'
params.apptainer_images.presto = '/b/u/vishnu/SINGULARITY_IMAGES/pulsar-miner_turing-sm75.sif'
params.apptainer_images.pulsarx = '/b/u/vishnu/SINGULARITY_IMAGES/pulsarx_latest.sif'
params.apptainer_images.sql = '/b/u/vishnu/SINGULARITY_IMAGES/compact_sql_latest.sif'
params.candyjar.prepare_candyjar = '/b/u/vishnu/COMPACT/one_ring/prepare_cands_for_candyjar.py'
params.dd_plan = ['0.0:0.0:100.0:1:1', '120:110:130:0.5:1', '122:112:132:0.5:1']
params.files_to_search = '/b/u/vishnu/COMPACT/one_ring/sample_file.txt'
params.filtool.extra_args = ''
params.filtool.filplan = ''
params.filtool.freq_decimation_factor = 1
params.filtool.get_metadata = '/b/u/vishnu/COMPACT/one_ring/get_metadata.py'
params.filtool.mean = 128
params.filtool.nbits = 8
params.filtool.rfi_filter = 'kadaneF 8 4 zdot'
params.filtool.std = 6
params.filtool.telescope = 'meerkat'
params.filtool.threads = 12
params.filtool.time_decimation_factor = 1
params.filtool.zap_string = ''
params.folding.fold_script = '/b/u/vishnu/COMPACT/one_ring/fold_peasoup_candidates.py'
params.hardware = 'Contra'
params.kafka.merged_fold_search = '/b/u/vishnu/COMPACT/one_ring/merge_fold_candidates_for_kafka.py'
params.kafka.message_create = '/b/u/vishnu/COMPACT/one_ring/create_message.py'
params.kafka.producer_script = '/b/u/vishnu/COMPACT/one_ring/kafka_producer.py'
params.kafka.save_search_candidate_uuid = '/b/u/vishnu/COMPACT/one_ring/generate_uuid_search_candidate.py'
params.kafka.schema_file = '/b/u/vishnu/COMPACT/one_ring/avro_schema/Processing.avsc'
params.kafka.schema_registry_url = 'http://localhost:8081'
params.kafka.server = 'localhost:9092'
params.kafka.topic = 'processing'
params.outputdir = 'results'
params.peasoup = '\n    [\n      {\n        "fft_size": "134217728",\n        "start_sample": "0",\n        "nsamples": null,\n        "acc_start": "-30.0",\n        "acc_end": "30.0",\n        "dm_pulse_width": "64",\n        "acc_pulse_width": "64",\n        "min_snr": "8.0",\n        "ram_limit_gb": "100.0",\n        "nh": "5",\n        "ngpus": "1",\n        "total_cands": "100000",\n        "accel_tol": 1.11,\n        "birdie_list": null,\n        "chan_mask": null,\n        "extra_args": null\n      },\n      {\n        "fft_size": "67108864",\n        "start_sample": "0",\n        "nsamples": null,\n        "acc_start": "-100.0",\n        "acc_end": "100.0",\n        "dm_pulse_width": "64",\n        "acc_pulse_width": "64",\n        "min_snr": "7.5",\n        "ram_limit_gb": "50.0",\n        "nh": "5",\n        "ngpus": "1",\n        "total_cands": "50000",\n        "accel_tol": 1.11,\n        "birdie_list": null,\n        "chan_mask": null,\n        "extra_args": null\n      },\n      {\n        "fft_size": "67108864",\n        "start_sample": "67108864",\n        "nsamples": null,\n        "acc_start": "-100.0",\n        "acc_end": "100.0",\n        "dm_pulse_width": "64",\n        "acc_pulse_width": "64",\n        "min_snr": "7.5",\n        "ram_limit_gb": "50.0",\n        "nh": "5",\n        "ngpus": "1",\n        "total_cands": "50000",\n        "accel_tol": 1.11,\n        "birdie_list": null,\n        "chan_mask": null,\n        "extra_args": null\n      }\n    ]\n    '
params.pipeline_name = 'Segmented Acceleration Search'
params.prepfold.mask = null
params.prepfold.ncpus = 6
params.project = 'COMPACT'
params.pulsarx.clfd_q_value = 2.0
params.pulsarx.extra_args = ''
params.pulsarx.fast_nbins = 128
params.pulsarx.fold_template = '/b/u/vishnu/COMPACT/one_ring/meerkat_fold.template'
params.pulsarx.nsubband = 64
params.pulsarx.rfi_filter = 'kadaneF 8 4 zdot'
params.pulsarx.slow_nbins = 64
params.pulsarx.subint_length = null
params.pulsarx.threads = 12
params.readfile.parser = '/b/u/vishnu/COMPACT/one_ring/readfile_parser.sh'
params.rfifind.rfifind_chanfrac = '0.7'
params.rfifind.rfifind_freqsig = '3.0'
params.rfifind.rfifind_intfrac = '0.3'
params.rfifind.rfifind_nthreads = '4'
params.rfifind.rfifind_time = '2.2'
params.rfifind.rfifind_timesig = '10.0'
params.target = 'M28'
params.telescope = 'MeerKAT'
params.use_kafka = 1
params.utc = 'abc'
params.weblog.enabled = true
params.weblog.url = 'http://localhost:8000/weblog'
plugins = ['nf-live-tracking@2.0.0']
process.cache = 'lenient'
process.executor = 'condor'
process.'withLabel:candyjar'.cpus = 1
process.'withLabel:candyjar'.memory = '5 GB'
process.'withLabel:candyjar'.queue = 'milan'
process.'withLabel:candyjar'.scratch = '/bscratch/$USER'
process.'withLabel:candyjar'.time = '12h'
process.'withLabel:filtool'.cpus = 12
process.'withLabel:filtool'.memory = '50 GB'
process.'withLabel:filtool'.time = '2h'
process.'withLabel:gpu'.cpus = 1
process.'withLabel:gpu'.memory = '20 GB'
process.'withLabel:gpu'.scratch = '/bscratch/$USER'
process.'withLabel:gpu'.time = '12h'
process.'withLabel:gpu_short'.cpus = 1
process.'withLabel:gpu_short'.memory = '50 GB'
process.'withLabel:gpu_short'.queue = 'skylake-gpu'
process.'withLabel:gpu_short'.scratch = '/bscratch/$USER'
process.'withLabel:gpu_short'.time = '2h'
process.'withLabel:long'.cpus = 1
process.'withLabel:long'.memory = '5 GB'
process.'withLabel:long'.queue = 'skylake'
process.'withLabel:long'.scratch = '/bscratch/$USER'
process.'withLabel:long'.time = '7d'
process.'withLabel:long_multi'.cpus = 16
process.'withLabel:long_multi'.memory = '100 GB'
process.'withLabel:long_multi'.queue = 'skylake'
process.'withLabel:long_multi'.scratch = '/bscratch/$USER'
process.'withLabel:long_multi'.time = '7d'
process.'withLabel:peasoup'.cpus = 1
process.'withLabel:peasoup'.memory = '40 GB'
process.'withLabel:peasoup'.queue = 'milan-gpu'
process.'withLabel:peasoup'.scratch = '/bscratch/$USER'
process.'withLabel:peasoup'.time = '30m'
process.'withLabel:prepfold'.cpus = 4
process.'withLabel:prepfold'.memory = '5 GB'
process.'withLabel:prepfold'.scratch = '/bscratch/$USER'
process.'withLabel:prepfold'.time = '1h'
process.'withLabel:pulsarx'.cpus = 4
process.'withLabel:pulsarx'.memory = '5 GB'
process.'withLabel:pulsarx'.scratch = '/bscratch/$USER'
process.'withLabel:pulsarx'.time = '1h'
